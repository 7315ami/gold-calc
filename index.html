<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">

<title>Gold Profit Calculator</title>

<style>
:root{
  --bg-normal:#fffdf7;
  --bg-special:#f4f8ff;
  --card:#ffffff;
  --line:#e5e7eb;
  --text:#111827;
  --muted:#6b7280;
  --unit:#9ca3af;
  --blue:#0b3ea8;
  --red:#dc2626;
  --gold:#a57c00;
}

*{box-sizing:border-box;}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
  color:var(--text);
  background:#f3f4f6;
}

.wrap{
  max-width:760px;
  margin:0 auto;
  padding:14px;
}

.card{
  background:var(--card);
  border:1px solid var(--line);
  border-radius:16px;
  padding:14px;
  margin-bottom:12px;
}

h1{
  margin:0;
  font-size:28px;
  line-height:1.2;
}

.sub{
  font-size:14px;
  color:var(--muted);
  margin-top:4px;
}

.row{
  display:flex;
  gap:8px;
  align-items:center;
}

.space{
  height:8px;
}

.tabs{
  display:flex;
  gap:8px;
  margin-top:12px;
}

.tab{
  flex:1;
  border:1px solid var(--line);
  border-radius:12px;
  padding:10px;
  text-align:center;
  font-weight:700;
  background:#fff;
  cursor:pointer;
}

.tab.active.normal{
  background:var(--bg-normal);
}

.tab.active.special{
  background:var(--bg-special);
  color:var(--gold);
}

.section{
  display:none;
}

.section.active{
  display:block;
}

.inputBlock{
  margin-top:10px;
}

.labelTop{
  font-size:13px;
  color:var(--muted);
  margin-bottom:4px;
}

.inputBig{
  width:100%;
  height:52px;
  border:1px solid var(--line);
  border-radius:12px;
  font-size:28px;
  font-weight:700;
  padding:0 14px;
  outline:none;
}

.unit{
  font-size:12px;
  color:var(--unit);
  margin-top:4px;
}

.btn{
  height:50px;
  border:none;
  border-radius:12px;
  background:#0f172a;
  color:#fff;
  font-size:18px;
  font-weight:700;
  padding:0 20px;
}

.resultBig{
  font-size:42px;
  font-weight:800;
  line-height:1.1;
}

.resultBlue{
  color:var(--blue);
}

.resultRed{
  color:var(--red);
}

.resultUnit{
  font-size:18px;
  color:var(--unit);
  margin-left:6px;
}

.noteSmall{
  font-size:12px;
  color:var(--muted);
  margin-top:4px;
}

details{
  border:1px solid var(--line);
  border-radius:12px;
  padding:10px;
  margin-top:10px;
}

summary{
  font-weight:700;
  cursor:pointer;
}

.langRow{
  display:flex;
  gap:8px;
}

.langBtn{
  flex:1;
  border:1px solid var(--line);
  border-radius:10px;
  padding:8px;
  text-align:center;
  font-weight:700;
  background:#fff;
  cursor:pointer;
}

.langBtn.active{
  background:#eef2ff;
}

.hidden{
  display:none;
}
</style>
</head>

<body>
<div class="wrap">

<div class="card">
  <h1 id="appTitle">ゴールド計算</h1>
  <div class="sub" id="appSub">Ghana → Japan / 利益計算</div>

  <div class="space"></div>

  <div class="langRow">
    <div class="langBtn active" id="btnJP">日本語</div>
    <div class="langBtn" id="btnEN">English</div>
    <div class="langBtn" id="btnPDF">PDF</div>
  </div>

  <div class="tabs">
    <div class="tab normal active" id="tabNormal">通常計算</div>
    <div class="tab special" id="tabSpecial">特別調達枠</div>
  </div>
</div>

<!-- ================= NORMAL ================= -->
<div class="section active" id="normalSec">

<div class="card">
  <h3 id="nInputTitle">入力</h3>

  <div class="inputBlock">
    <div class="labelTop">購入単価（GHS / Ghana pound）</div>
    <input id="nPrice" class="inputBig" value="13000">
    <div class="unit">1 Ghana pound あたり</div>
  </div>

  <div class="inputBlock">
    <div class="labelTop">重量（Ghana pound）</div>
    <input id="nPound" class="inputBig" value="641.03">
  </div>

  <div class="inputBlock">
    <div class="labelTop">重量（g）</div>
    <input id="nGram" class="inputBig" value="5000">
    <div class="unit">1 Ghana pound = 7.8 g（連動）</div>
  </div>

  <div class="inputBlock">
    <div class="labelTop">為替（1 GHS → JPY）</div>
    <input id="nFx" class="inputBig" value="14.5">
  </div>

  <div class="inputBlock">
    <div class="labelTop">日本24金 買取参考価格（JPY / g）</div>
    <input id="nJapan" class="inputBig" value="26000">
  </div>

  <div class="inputBlock">
    <div class="labelTop">その他コスト（GHS）</div>
    <input id="nOther" class="inputBig" value="0">
  </div>

  <div class="space"></div>

  <button class="btn" id="nCalc">計算</button>
</div>

<div class="card">
  <h3 id="nResultTitle">結果</h3>

  <div class="noteSmall">支払う総額（JPY）</div>
  <div class="resultBig" id="nPay">—</div>

  <div class="space"></div>

  <div class="noteSmall">最終利益（JPY）</div>
  <div class="resultBig resultBlue" id="nProfit">—</div>

  <div class="noteSmall" id="nProfitNote"></div>

  <div class="space"></div>

  <div class="noteSmall">利益率（%）</div>
  <div class="resultBig" id="nRate">—</div>

  <details>
    <summary>内訳（タップで開く）</summary>
    <div id="nBreak"></div>
  </details>

</div>
</div>
<!-- ================= SPECIAL ================= -->
<div class="section" id="specialSec">

<div class="card" style="background:var(--bg-special)">
  <h3 id="sInputTitle" style="color:var(--gold)">特別調達枠｜入力</h3>

  <div class="inputBlock">
    <div class="labelTop">購入単価（GHS / Ghana pound）</div>
    <input id="sPrice" class="inputBig" value="10000">
    <div class="unit">特別調達価格</div>
  </div>

  <div class="inputBlock">
    <div class="labelTop">月間想定調達量（g）</div>
    <input id="sGram" class="inputBig" value="5000">
    <div class="unit" id="sPoundView">≈ 641.03 Ghana pound</div>
  </div>

  <div class="inputBlock">
    <div class="labelTop">為替（1 GHS → JPY）</div>
    <input id="sFx" class="inputBig" value="14.5">
  </div>

  <div class="inputBlock">
    <div class="labelTop">日本24金 買取参考価格（JPY / g）</div>
    <input id="sJapan" class="inputBig" value="26000">
  </div>

  <div class="inputBlock">
    <div class="labelTop">その他コスト（GHS）</div>
    <input id="sOther" class="inputBig" value="0">
  </div>

  <div class="inputBlock">
    <div class="labelTop">投下資金（JPY）</div>
    <input id="sInvest" class="inputBig" value="15000000">
  </div>

  <div class="inputBlock">
    <div class="labelTop">想定回収期間（表示のみ）</div>
    <input id="sRecovery" class="inputBig" value="3〜5ヶ月" readonly>
    <div class="unit">※ 見込み表示（固定テキスト）</div>
  </div>

  <div class="space"></div>

  <button class="btn" id="sCalc">計算</button>
</div>

<div class="card">
  <h3 id="sResultTitle">結果</h3>

  <div class="noteSmall">支払う総額（JPY）</div>
  <div class="resultBig" id="sPay">—</div>

  <div class="space"></div>

  <div class="noteSmall">見込み利益（JPY）</div>
  <div class="resultBig resultBlue" id="sProfit">—</div>

  <div class="noteSmall" style="color:#9ca3af;">
    ※ 稼働率60%で算出
  </div>

  <div class="space"></div>

  <div class="noteSmall">利益率（%）</div>
  <div class="resultBig" id="sRate">—</div>

  <details>
    <summary>内訳（タップで開く）</summary>
    <div id="sBreak"></div>
  </details>

</div>
</div>

<!-- ================= PDF MODAL ================= -->
<div class="card hidden" id="pdfSelect">
  <h3>PDF 出力</h3>

  <div class="inputBlock">
    <label><input type="checkbox" id="pdfNormal" checked> 通常計算</label>
  </div>

  <div class="inputBlock">
    <label><input type="checkbox" id="pdfSpecial" checked> 特別調達枠</label>
  </div>

  <div class="space"></div>
  <button class="btn" id="pdfGo">PDF作成</button>
</div>

</div> <!-- wrap -->

<script>
const $ = id => document.getElementById(id);

let lang = "jp";

function num(v){
  return Number(String(v).replace(/,/g,"")) || 0;
}

function fmt(n){
  return Number(n).toLocaleString();
}

function calcNormal(){

  const price = num($("nPrice").value);
  const pound = num($("nPound").value);
  const gram  = num($("nGram").value);
  const fx    = num($("nFx").value);
  const jp    = num($("nJapan").value);
  const other = num($("nOther").value);

  const costGHS = price*pound + other;
  const payJPY  = costGHS * fx;

  const sellJPY = gram * jp;

  const profit = sellJPY - payJPY;
  const rate = payJPY ? (profit/payJPY*100) : 0;

  $("nPay").innerHTML = fmt(payJPY) + "<span class='resultUnit'>JPY</span>";

  $("nProfit").classList.remove("resultRed","resultBlue");
  $("nProfit").classList.add(profit>=0?"resultBlue":"resultRed");
  $("nProfit").innerHTML = fmt(profit) + "<span class='resultUnit'>JPY</span>";

  $("nRate").innerHTML = rate.toFixed(2) + "<span class='resultUnit'>%</span>";

  $("nBreak").innerHTML =
    "ガーナ総コスト : "+fmt(costGHS)+" GHS<br>" +
    "日本売却想定 : "+fmt(sellJPY)+" JPY";
}

function calcSpecial(){

  const price = num($("sPrice").value);
  const gram  = num($("sGram").value);
  const fx    = num($("sFx").value);
  const jp    = num($("sJapan").value);
  const other = num($("sOther").value);

  const pound = gram / 7.8;
  $("sPoundView").textContent =
    "≈ " + pound.toFixed(2) + " Ghana pound";
  const costGHS = price*pound + other;
  const payJPY  = costGHS * fx;

  const sellJPY = gram * jp;

  const profit = sellJPY - payJPY;
  const rate = payJPY ? (profit/payJPY*100) : 0;

  $("sPay").innerHTML =
    fmt(payJPY) + "<span class='resultUnit'>JPY</span>";

  $("sProfit").classList.remove("resultRed","resultBlue");
  $("sProfit").classList.add(profit>=0?"resultBlue":"resultRed");
  $("sProfit").innerHTML =
    fmt(profit) + "<span class='resultUnit'>JPY</span>";

  $("sRate").innerHTML =
    rate.toFixed(2) + "<span class='resultUnit'>%</span>";

  $("sBreak").innerHTML =
    "ガーナ総コスト : "+fmt(costGHS)+" GHS<br>" +
    "日本売却想定 : "+fmt(sellJPY)+" JPY";
}

/* ===== TAB ===== */
function showTab(type){
  $("normalSec").classList.add("hidden");
  $("specialSec").classList.add("hidden");

  $("tabNormal").classList.remove("active");
  $("tabSpecial").classList.remove("active");

  if(type==="normal"){
    $("normalSec").classList.remove("hidden");
    $("tabNormal").classList.add("active");
  }else{
    $("specialSec").classList.remove("hidden");
    $("tabSpecial").classList.add("active");
  }
}

/* ===== PDF ===== */
$("pdfBtn").onclick = ()=>{
  $("pdfSelect").classList.toggle("hidden");
};

$("pdfGo").onclick = ()=>{
  window.print();
};

/* ===== EVENTS ===== */
$("nCalc").onclick = calcNormal;
$("sCalc").onclick = calcSpecial;

$("tabNormal").onclick = ()=>showTab("normal");
$("tabSpecial").onclick = ()=>showTab("special");

/* ===== INIT ===== */
showTab("normal");
calcNormal();
calcSpecial();

</script>
</body>
</html>