<!doctype html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Gold Calc</title>
  <style>
    :root{
      --bg:#f6f6f7; --card:#fff; --text:#111; --muted:#666; --line:#ddd;
      --pad:14px; --radius:16px;
    }
    *{box-sizing:border-box;}
    body{
      margin:0; background:var(--bg); color:var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Noto Sans JP", "Hiragino Kaku Gothic ProN", Meiryo, sans-serif;
    }
    .wrap{max-width:820px; margin:0 auto; padding:18px 14px 40px;}
    .top{
      display:flex; align-items:flex-start; justify-content:space-between; gap:14px; flex-wrap:wrap;
      margin:6px 0 10px;
    }
    .title{font-size:28px; font-weight:900; letter-spacing:.2px; margin:0;}
    .sub{margin:6px 0 0; color:var(--muted); font-weight:600;}
    .right{min-width:220px;}
    label{display:block; font-weight:800; margin:10px 0 6px;}
    .small{font-size:13px; color:var(--muted); margin-top:6px;}
    input, select{
      width:100%; padding:12px 12px; font-size:18px;
      border:1px solid var(--line); border-radius:12px; background:#fff;
    }
    .grid{display:grid; gap:12px;}
    @media (min-width:720px){ .grid2{grid-template-columns:1fr 1fr;} .grid3{grid-template-columns:1fr 1fr 1fr;} }
    .card{
      background:var(--card); border:1px solid var(--line);
      border-radius:var(--radius); padding:var(--pad);
    }
    .btn{
      width:100%; padding:14px 14px; font-size:18px; font-weight:900;
      border:0; border-radius:14px; background:#111; color:#fff;
      margin-top:10px;
    }
    .row{display:flex; justify-content:space-between; gap:12px; align-items:baseline; padding:6px 0;}
    .k{color:var(--muted); font-weight:700;}
    .v{font-weight:900;}
    .big{font-size:22px;}
    .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 10px; border:1px solid var(--line); border-radius:999px; background:#fff;
      font-weight:800;
    }
    details{border-top:1px dashed var(--line); margin-top:10px; padding-top:10px;}
    summary{cursor:pointer; font-weight:900;}
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;}
    .warn{color:#b00020; font-weight:900;}
  </style>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <div>
        <h1 class="title" id="appTitle">ã‚´ãƒ¼ãƒ«ãƒ‰è¨ˆç®—</h1>
        <div class="sub" id="appSub">ã‚·ãƒ³ãƒ—ãƒ«ãƒ»é€Ÿã„ãƒ»ãƒŸã‚¹ãªã—</div>
      </div>

      <div class="right card">
        <label id="langLabel">è¨€èª</label>
        <select id="lang">
          <option value="ja">æ—¥æœ¬èª</option>
          <option value="en">English</option>
        </select>
      </div>
    </div>

    <!-- Inputs -->
    <div class="card">
      <div class="grid grid2">
        <div>
          <label id="pricePerPoundLabel">è³¼å…¥å˜ä¾¡ï¼ˆGHS / Ghana poundï¼‰</label>
          <input id="pricePerPound" type="number" inputmode="decimal" placeholder="ä¾‹ï¼š10000" />
          <div class="small" id="pricePerPoundHint">â€» 1 Ghana pound ã‚ãŸã‚Šã®ä¾¡æ ¼</div>
        </div>

        <div>
          <label id="gPerPoundLabel">æ›ç®—ï¼ˆg / Ghana poundï¼‰</label>
          <input id="gPerPound" type="number" inputmode="decimal" value="7.8" />
          <div class="small" id="gPerPoundHint">ä¾‹ï¼š1 pound = 7.8 g</div>
        </div>
      </div>

      <div class="grid grid2">
        <div>
          <label id="weightPoundLabel">é‡é‡ï¼ˆGhana poundï¼‰</label>
          <input id="weightPound" type="number" inputmode="decimal" placeholder="ä¾‹ï¼š10" />
        </div>
        <div>
          <label id="weightGLabel">é‡é‡ï¼ˆgï¼‰</label>
          <input id="weightG" type="number" inputmode="decimal" placeholder="ä¾‹ï¼š78" />
          <div class="small" id="weightSyncHint">ã©ã¡ã‚‰ã‚’ç·¨é›†ã—ã¦ã‚‚é€£å‹•ã—ã¾ã™ã€‚</div>
        </div>
      </div>

      <div class="grid grid3">
        <div>
          <label id="gbFeeLabel">Gold Board æ‰‹æ•°æ–™ï¼ˆ%ï¼‰</label>
          <input id="gbFee" type="number" inputmode="decimal" value="10" />
        </div>
        <div>
          <label id="insLabel">è¼¸å‡ºãƒ»ä¿é™ºï¼ˆ%ï¼‰</label>
          <input id="insFee" type="number" inputmode="decimal" value="6" />
        </div>
        <div>
          <label id="otherGhsLabel">ãã®ä»–ã‚³ã‚¹ãƒˆï¼ˆGHSï¼‰</label>
          <input id="otherGhs" type="number" inputmode="decimal" value="0" />
          <div class="small" id="otherGhsHint">ä¿ç®¡ãƒ»äº¤é€šãƒ»å‡¦ç†è²»ãªã©ï¼ˆç„¡ã‘ã‚Œã°0ï¼‰</div>
        </div>
      </div>

      <hr style="border:none;border-top:1px solid var(--line); margin:14px 0;">

      <div class="grid grid3">
        <div>
          <label id="fxLabel">ç‚ºæ›¿ï¼ˆGHS â†’ JPYï¼‰</label>
          <input id="fx" type="number" inputmode="decimal" value="14.5" />
        </div>
        <div>
          <label id="taxRateLabel">æ¶ˆè²»ç¨ï¼ˆ%ï¼‰</label>
          <input id="taxRate" type="number" inputmode="decimal" value="10" />
          <div class="small" id="taxHint">CIF Ã— æ¶ˆè²»ç¨</div>
        </div>
        <div>
          <label id="jpAddLabel">æ—¥æœ¬è¿½åŠ ã‚³ã‚¹ãƒˆï¼ˆJPYï¼‰</label>
          <input id="jpAdd" type="number" inputmode="decimal" value="0" />
          <div class="small" id="jpAddHint">ç²¾éŒ¬ãƒ»å›½å†…é€æ–™ãƒ»æ‰‹æ•°æ–™ãªã©ï¼ˆç„¡ã‘ã‚Œã°0ï¼‰</div>
        </div>
      </div>

      <div class="grid grid2">
        <div>
          <label id="sellJpyLabel">æ—¥æœ¬å£²å€¤ï¼ˆJPY / gï¼‰</label>
          <input id="sellJpy" type="number" inputmode="decimal" placeholder="ä¾‹ï¼š26000" />
          <div class="small" id="sellHint">å…¥åŠ›ã™ã‚‹ã¨å£²ä¸Šã¨åˆ©ç›Šã‚‚è¡¨ç¤ºã—ã¾ã™ï¼ˆä»»æ„ï¼‰</div>
        </div>
        <div>
          <button class="btn" id="calcBtn" type="button">è¨ˆç®—</button>
          <div class="small" id="autoHint">ãƒ’ãƒ³ãƒˆï¼šå…¥åŠ›ã™ã‚‹ã ã‘ã§è‡ªå‹•æ›´æ–°ã—ã¾ã™ã€‚</div>
        </div>
      </div>

      <div class="small warn" id="warn"></div>
    </div>

    <!-- Results -->
    <div class="card" style="margin-top:12px;">
      <div class="row">
        <div class="k" id="ghTotalLabel">ã‚¬ãƒ¼ãƒŠç·ã‚³ã‚¹ãƒˆï¼ˆGHSï¼‰</div>
        <div class="v big" id="ghanaTotal">-</div>
      </div>

      <details>
        <summary id="ghanaBreakdownTitle">ã‚¬ãƒ¼ãƒŠå´ å†…è¨³ï¼ˆã‚¿ãƒƒãƒ—ã§è¡¨ç¤ºï¼‰</summary>
        <div class="row"><div class="k" id="purchaseLabel">è³¼å…¥åˆè¨ˆ</div><div class="v" id="purchaseTotal">-</div></div>
        <div class="row"><div class="k" id="gbFeeAmtLabel">Gold Board æ‰‹æ•°æ–™</div><div class="v" id="gbFeeAmt">-</div></div>
        <div class="row"><div class="k" id="insAmtLabel">è¼¸å‡ºãƒ»ä¿é™º</div><div class="v" id="insAmt">-</div></div>
        <div class="row"><div class="k" id="otherAmtLabel">ãã®ä»–ã‚³ã‚¹ãƒˆ</div><div class="v" id="otherAmt">-</div></div>
        <div class="small mono" id="ghanaFormula">-</div>
      </details>

      <hr style="border:none;border-top:1px solid var(--line); margin:14px 0;">

      <div class="row">
        <div class="k" id="cifLabel">CIFï¼ˆJPYï¼‰</div>
        <div class="v big" id="cifJpy">-</div>
      </div>
      <div class="row">
        <div class="k" id="taxLabel">æ¶ˆè²»ç¨ï¼ˆJPYï¼‰</div>
        <div class="v" id="taxJpy">-</div>
      </div>
      <div class="row">
        <div class="k" id="jpTotalLabel">æ—¥æœ¬ç·ã‚³ã‚¹ãƒˆï¼ˆJPYï¼‰</div>
        <div class="v big" id="japanTotal">-</div>
      </div>

      <details>
        <summary id="jpBreakdownTitle">æ—¥æœ¬å´ å†…è¨³ï¼ˆã‚¿ãƒƒãƒ—ã§è¡¨ç¤ºï¼‰</summary>
        <div class="row"><div class="k" id="fxUsedLabel">ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆ</div><div class="v" id="fxUsed">-</div></div>
        <div class="row"><div class="k" id="jpAddUsedLabel">æ—¥æœ¬è¿½åŠ ã‚³ã‚¹ãƒˆ</div><div class="v" id="jpAddUsed">-</div></div>
        <div class="small mono" id="jpFormula">-</div>
      </details>

      <hr style="border:none;border-top:1px solid var(--line); margin:14px 0;">

      <div class="row">
        <div class="k" id="combinedLabel">ã‚¬ãƒ¼ãƒŠğŸ‡¬ğŸ‡­ + æ—¥æœ¬ğŸ‡¯ğŸ‡µ ç·åˆè¨ˆã‚³ã‚¹ãƒˆï¼ˆJPYï¼‰</div>
        <div class="v big" id="combinedTotal">-</div>
      </div>

      <details>
        <summary id="profitTitle">å£²ä¸Šãƒ»åˆ©ç›Šï¼ˆä»»æ„ï¼šå£²å€¤å…¥åŠ›æ™‚ã«è¡¨ç¤ºï¼‰</summary>
        <div class="row"><div class="k" id="revenueLabel">å£²ä¸Šåˆè¨ˆï¼ˆJPYï¼‰</div><div class="v" id="revenue">-</div></div>
        <div class="row"><div class="k" id="profitLabel">åˆ©ç›Šï¼ˆJPYï¼‰</div><div class="v big" id="profit">-</div></div>
        <div class="small mono" id="profitFormula">-</div>
      </details>
    </div>
  </div>

<script>
  const $ = (id)=>document.getElementById(id);

  // --- i18n ---
  const T = {
    ja: {
      appTitle:"ã‚´ãƒ¼ãƒ«ãƒ‰è¨ˆç®—", appSub:"ã‚·ãƒ³ãƒ—ãƒ«ãƒ»é€Ÿã„ãƒ»ãƒŸã‚¹ãªã—",
      langLabel:"è¨€èª",
      pricePerPoundLabel:"è³¼å…¥å˜ä¾¡ï¼ˆGHS / Ghana poundï¼‰",
      pricePerPoundHint:"â€» 1 Ghana pound ã‚ãŸã‚Šã®ä¾¡æ ¼",
      gPerPoundLabel:"æ›ç®—ï¼ˆg / Ghana poundï¼‰",
      gPerPoundHint:"ä¾‹ï¼š1 pound = 7.8 g",
      weightPoundLabel:"é‡é‡ï¼ˆGhana poundï¼‰",
      weightGLabel:"é‡é‡ï¼ˆgï¼‰",
      weightSyncHint:"ã©ã¡ã‚‰ã‚’ç·¨é›†ã—ã¦ã‚‚é€£å‹•ã—ã¾ã™ã€‚",
      gbFeeLabel:"Gold Board æ‰‹æ•°æ–™ï¼ˆ%ï¼‰",
      insLabel:"è¼¸å‡ºãƒ»ä¿é™ºï¼ˆ%ï¼‰",
      otherGhsLabel:"ãã®ä»–ã‚³ã‚¹ãƒˆï¼ˆGHSï¼‰",
      otherGhsHint:"ä¿ç®¡ãƒ»äº¤é€šãƒ»å‡¦ç†è²»ãªã©ï¼ˆç„¡ã‘ã‚Œã°0ï¼‰",
      fxLabel:"ç‚ºæ›¿ï¼ˆGHS â†’ JPYï¼‰",
      taxRateLabel:"æ¶ˆè²»ç¨ï¼ˆ%ï¼‰",
      taxHint:"CIF Ã— æ¶ˆè²»ç¨",
      jpAddLabel:"æ—¥æœ¬è¿½åŠ ã‚³ã‚¹ãƒˆï¼ˆJPYï¼‰",
      jpAddHint:"ç²¾éŒ¬ãƒ»å›½å†…é€æ–™ãƒ»æ‰‹æ•°æ–™ãªã©ï¼ˆç„¡ã‘ã‚Œã°0ï¼‰",
      sellJpyLabel:"æ—¥æœ¬å£²å€¤ï¼ˆJPY / gï¼‰",
      sellHint:"å…¥åŠ›ã™ã‚‹ã¨å£²ä¸Šã¨åˆ©ç›Šã‚‚è¡¨ç¤ºã—ã¾ã™ï¼ˆä»»æ„ï¼‰",
      calcBtn:"è¨ˆç®—",
      autoHint:"ãƒ’ãƒ³ãƒˆï¼šå…¥åŠ›ã™ã‚‹ã ã‘ã§è‡ªå‹•æ›´æ–°ã—ã¾ã™ã€‚",
      ghTotalLabel:"ã‚¬ãƒ¼ãƒŠç·ã‚³ã‚¹ãƒˆï¼ˆGHSï¼‰",
      ghanaBreakdownTitle:"ã‚¬ãƒ¼ãƒŠå´ å†…è¨³ï¼ˆã‚¿ãƒƒãƒ—ã§è¡¨ç¤ºï¼‰",
      purchaseLabel:"è³¼å…¥åˆè¨ˆ",
      gbFeeAmtLabel:"Gold Board æ‰‹æ•°æ–™",
      insAmtLabel:"è¼¸å‡ºãƒ»ä¿é™º",
      otherAmtLabel:"ãã®ä»–ã‚³ã‚¹ãƒˆ",
      cifLabel:"CIFï¼ˆJPYï¼‰",
      taxLabel:"æ¶ˆè²»ç¨ï¼ˆJPYï¼‰",
      jpTotalLabel:"æ—¥æœ¬ç·ã‚³ã‚¹ãƒˆï¼ˆJPYï¼‰",
      jpBreakdownTitle:"æ—¥æœ¬å´ å†…è¨³ï¼ˆã‚¿ãƒƒãƒ—ã§è¡¨ç¤ºï¼‰",
      fxUsedLabel:"ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆ",
      jpAddUsedLabel:"æ—¥æœ¬è¿½åŠ ã‚³ã‚¹ãƒˆ",
      combinedLabel:"ã‚¬ãƒ¼ãƒŠğŸ‡¬ğŸ‡­ + æ—¥æœ¬ğŸ‡¯ğŸ‡µ ç·åˆè¨ˆã‚³ã‚¹ãƒˆï¼ˆJPYï¼‰",
      profitTitle:"å£²ä¸Šãƒ»åˆ©ç›Šï¼ˆä»»æ„ï¼šå£²å€¤å…¥åŠ›æ™‚ã«è¡¨ç¤ºï¼‰",
      revenueLabel:"å£²ä¸Šåˆè¨ˆï¼ˆJPYï¼‰",
      profitLabel:"åˆ©ç›Šï¼ˆJPYï¼‰",
      warn:""
    },
    en: {
      appTitle:"Gold Calculator", appSub:"Simple, fast, no mistakes",
      langLabel:"Language",
      pricePerPoundLabel:"Buy price (GHS / Ghana pound)",
      pricePerPoundHint:"Price per 1 Ghana pound",
      gPerPoundLabel:"Conversion (g / Ghana pound)",
      gPerPoundHint:"Example: 1 pound = 7.8 g",
      weightPoundLabel:"Weight (Ghana pound)",
      weightGLabel:"Weight (g)",
      weightSyncHint:"Editing either field updates the other.",
      gbFeeLabel:"Gold Board fee (%)",
      insLabel:"Export & insurance (%)",
      otherGhsLabel:"Other costs (GHS)",
      otherGhsHint:"Storage, transport, treatment, etc. (0 if none)",
      fxLabel:"FX (GHS â†’ JPY)",
      taxRateLabel:"Consumption tax (%)",
      taxHint:"CIF Ã— tax",
      jpAddLabel:"Japan extra costs (JPY)",
      jpAddHint:"Refining, domestic shipping, fees, etc. (0 if none)",
      sellJpyLabel:"Sell price in Japan (JPY / g)",
      sellHint:"If filled, revenue & profit will be shown (optional)",
      calcBtn:"Calculate",
      autoHint:"Tip: auto-updates while typing.",
      ghTotalLabel:"Ghana total cost (GHS)",
      ghanaBreakdownTitle:"Ghana breakdown (tap to expand)",
      purchaseLabel:"Purchase subtotal",
      gbFeeAmtLabel:"Gold Board fee",
      insAmtLabel:"Export & insurance",
      otherAmtLabel:"Other costs",
      cifLabel:"CIF (JPY)",
      taxLabel:"Consumption tax (JPY)",
      jpTotalLabel:"Japan total cost (JPY)",
      jpBreakdownTitle:"Japan breakdown (tap to expand)",
      fxUsedLabel:"FX rate",
      jpAddUsedLabel:"Japan extra costs",
      combinedLabel:"Combined total cost (JPY)",
      profitTitle:"Revenue & Profit (optional)",
      revenueLabel:"Revenue (JPY)",
      profitLabel:"Profit (JPY)",
      warn:""
    }
  };

  function setLang(lang){
    const t=T[lang]||T.ja;
    for(const k in t){
      if($(k)) $(k).textContent=t[k];
    }
    // Also update placeholders lightly (keep simple)
  }

  // --- helpers ---
  const n = (v)=> {
    const x = parseFloat(String(v).replace(/,/g,''));
    return Number.isFinite(x) ? x : 0;
  };
  const fmt = (x, decimals=0)=> {
    if(!Number.isFinite(x)) return "-";
    return x.toLocaleString(undefined, {maximumFractionDigits:decimals, minimumFractionDigits:decimals});
  };

  // prevent infinite sync loop
  let syncLock=false;

  function syncFromPound(){
    if(syncLock) return;
    syncLock=true;
    const pounds = n($("weightPound").value);
    const gpp = n($("gPerPound").value) || 7.8;
    $("weightG").value = pounds ? (pounds * gpp) : "";
    syncLock=false;
  }
  function syncFromG(){
    if(syncLock) return;
    syncLock=true;
    const grams = n($("weightG").value);
    const gpp = n($("gPerPound").value) || 7.8;
    $("weightPound").value = grams ? (grams / gpp) : "";
    syncLock=false;
  }

  function calc(){
    const pricePerPound = n($("pricePerPound").value);
    const pounds = n($("weightPound").value);
    const grams = n($("weightG").value);
    const gpp = n($("gPerPound").value) || 7.8;

    // If user typed grams only, pounds may be 0 but grams > 0; normalize using grams
    const usedPounds = pounds > 0 ? pounds : (grams > 0 ? grams / gpp : 0);
    const usedGrams  = grams  > 0 ? grams  : (pounds > 0 ? pounds * gpp : 0);

    const gbPct = n($("gbFee").value) / 100;
    const insPct = n($("insFee").value) / 100;
    const otherGhs = n($("otherGhs").value);

    const fx = n($("fx").value);
    const taxPct = n($("taxRate").value) / 100;
    const jpAdd = n($("jpAdd").value);

    const sellJpyPerG = n($("sellJpy").value);

    // Ghana side (GHS)
    const purchaseTotal = pricePerPound * usedPounds;
    const gbFeeAmt = purchaseTotal * gbPct;
    const insAmt = purchaseTotal * insPct;
    const ghanaTotal = purchaseTotal + gbFeeAmt + insAmt + otherGhs;

    // Japan side (JPY)
    // CIF is treated as (Ghana total cost) converted to JPY
    const cifJpy = ghanaTotal * fx;
    const taxJpy = cifJpy * taxPct;
    const japanTotal = cifJpy + taxJpy + jpAdd;

    // Combined total cost in JPY (ghana already included via cif)
    const combinedTotal = japanTotal;

    // Revenue & profit (optional)
    const revenue = sellJpyPerG > 0 ? (sellJpyPerG * usedGrams) : NaN;
    const profit = sellJpyPerG > 0 ? (revenue - combinedTotal) : NaN;

    // Output
    $("ghanaTotal").textContent = fmt(ghanaTotal) + " GHS";
    $("purchaseTotal").textContent = fmt(purchaseTotal) + " GHS";
    $("gbFeeAmt").textContent = fmt(gbFeeAmt) + " GHS";
    $("insAmt").textContent = fmt(insAmt) + " GHS";
    $("otherAmt").textContent = fmt(otherGhs) + " GHS";
    $("ghanaFormula").textContent =
      `Ghana total = ${fmt(purchaseTotal)} + ${fmt(gbFeeAmt)} + ${fmt(insAmt)} + ${fmt(otherGhs)} = ${fmt(ghanaTotal)} (GHS)`;

    $("cifJpy").textContent = fmt(cifJpy) + " JPY";
    $("taxJpy").textContent = fmt(taxJpy) + " JPY";
    $("japanTotal").textContent = fmt(japanTotal) + " JPY";
    $("combinedTotal").textContent = fmt(combinedTotal) + " JPY";
    $("fxUsed").textContent = `${fmt(fx, 4)} JPY / GHS`;
    $("jpAddUsed").textContent = fmt(jpAdd) + " JPY";
    $("jpFormula").textContent =
      `CIF = Ghana total (${fmt(ghanaTotal)} GHS) Ã— FX (${fmt(fx,4)}) = ${fmt(cifJpy)} JPY
Tax = CIF Ã— ${fmt(taxPct*100,2)}% = ${fmt(taxJpy)} JPY
Japan total = CIF + Tax + Japan extra (${fmt(jpAdd)} JPY) = ${fmt(japanTotal)} JPY`;

    if(Number.isFinite(revenue)){
      $("revenue").textContent = fmt(revenue) + " JPY";
      $("profit").textContent = fmt(profit) + " JPY";
      $("profitFormula").textContent =
        `Revenue = ${fmt(sellJpyPerG)} Ã— ${fmt(usedGrams,2)}g = ${fmt(revenue)} JPY
Profit = Revenue - Combined total (${fmt(combinedTotal)} JPY) = ${fmt(profit)} JPY`;
    }else{
      $("revenue").textContent = "-";
      $("profit").textContent = "-";
      $("profitFormula").textContent = "-";
    }

    // small warning if nothing entered
    const warn = $("warn");
    if(pricePerPound===0 || usedPounds===0){
      warn.textContent = ( $("lang").value==="en" )
        ? "Tip: Enter buy price and weight to calculate."
        : "ãƒ’ãƒ³ãƒˆï¼šè³¼å…¥å˜ä¾¡ã¨é‡é‡ã‚’å…¥ã‚Œã‚‹ã¨è¨ˆç®—ã§ãã¾ã™ã€‚";
    }else{
      warn.textContent = "";
    }
  }

  // --- events ---
  $("lang").addEventListener("change", ()=>{ setLang($("lang").value); });
  $("calcBtn").addEventListener("click", calc);

  // Auto update
  const inputs = ["pricePerPound","gPerPound","weightPound","weightG","gbFee","insFee","otherGhs","fx","taxRate","jpAdd","sellJpy"];
  inputs.forEach(id=>{
    $(id).addEventListener("input", ()=> {
      if(id==="weightPound") syncFromPound();
      if(id==="weightG") syncFromG();
      if(id==="gPerPound"){
        // when conversion changes, keep pounds as the source if present
        if(n($("weightPound").value)>0) syncFromPound();
        else if(n($("weightG").value)>0) syncFromG();
      }
      calc();
    });
  });

  // init
  setLang("ja");
  calc();
</script>
</body>
</html>